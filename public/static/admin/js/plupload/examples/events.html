<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>

<title>Plupload - Events example</title>

<!-- production -->
<script type="text/javascript" src="../js/plupload.full.min.js"></script>


<!-- debug 
<script type="text/javascript" src="../js/moxie.js"></script>
<script type="text/javascript" src="../js/plupload.dev.js"></script>
-->

</head>
<body style="font: 13px Verdana; background: #eee; color: #333">

<h1>Events example</h1>

<div id="container">
    <a id="pickfiles" href="javascript:;">[Select files]</a> 
    <a id="uploadfiles" href="javascript:;">[Upload files]</a>
</div>

<br />
<pre id="console"></pre>
Â 
<script type="text/javascript">
	var uploader = new plupload.Uploader({
Â Â Â Â Â Â Â Â // General settings
Â Â Â Â Â Â Â Â runtimes : 'silverlight,html4',
		browse_button : 'pickfiles', // you can pass in id...
Â Â Â Â Â Â Â Â url : 'upload.php',
Â Â Â Â Â Â Â Â chunk_size : '1mb',
Â Â Â Â Â Â Â Â unique_names : true,
Â 
Â Â Â Â Â Â Â Â // Resize images on client-side if we can
Â Â Â Â Â Â Â Â resize : { width : 320, height : 240, quality : 90 },
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â filters : {
Â Â Â Â Â Â Â Â Â Â Â Â max_file_size : '10mb',

			// Specify what files to browse for
Â Â Â Â Â Â Â Â Â Â Â Â mime_types: [
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â {title : "Image files", extensions : "jpg,gif,png"},
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â {title : "Zip files", extensions : "zip"}
Â Â Â Â Â Â Â Â Â Â Â Â ]
Â Â Â Â Â Â Â Â },
Â 
		flash_swf_url : '../js/Moxie.swf',
		silverlight_xap_url : '../js/Moxie.xap',
Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â // PreInit events, bound before the internal events
Â Â Â Â Â Â Â Â preinit : {
Â Â Â Â Â Â Â Â Â Â Â Â Init: function(up, info) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log('[Init]', 'Info:', info, 'Features:', up.features);
Â Â Â Â Â Â Â Â Â Â Â Â },
Â 
Â Â Â Â Â Â Â Â Â Â Â Â UploadFile: function(up, file) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log('[UploadFile]', file);
Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // You can override settings before the file is uploaded
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // up.setOption('url', 'upload.php?id=' + file.id);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // up.setOption('multipart_params', {param1 : 'value1', param2 : 'value2'});
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â },
Â 
Â Â Â Â Â Â Â Â // Post init events, bound after the internal events
Â Â Â Â Â Â Â Â init : {
			PostInit: function() {
				// Called after initialization is finished and internal event handlers bound
				log('[PostInit]');
				
				document.getElementById('uploadfiles').onclick = function() {
					uploader.start();
					return false;
				};
			},

			Browse: function(up) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Called when file picker is clicked
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log('[Browse]');
Â Â Â Â Â Â Â Â Â Â Â Â },

Â Â Â Â Â Â Â Â Â Â Â Â Refresh: function(up) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Called when the position or dimensions of the picker change
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log('[Refresh]');
Â Â Â Â Â Â Â Â Â Â Â Â },
Â 
Â Â Â Â Â Â Â Â Â Â Â Â StateChanged: function(up) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Called when the state of the queue is changed
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log('[StateChanged]', up.state == plupload.STARTED ? "STARTED" : "STOPPED");
Â Â Â Â Â Â Â Â Â Â Â Â },
Â 
Â Â Â Â Â Â Â Â Â Â Â Â QueueChanged: function(up) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Called when queue is changed by adding or removing files
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log('[QueueChanged]');
Â Â Â Â Â Â Â Â Â Â Â Â },

			OptionChanged: function(up, name, value, oldValue) {
				// Called when one of the configuration options is changed
				log('[OptionChanged]', 'Option Name: ', name, 'Value: ', value, 'Old Value: ', oldValue);
			},

			BeforeUpload: function(up, file) {
				// Called right before the upload for a given file starts, can be used to cancel it if required
				log('[BeforeUpload]', 'File: ', file);
			},
Â 
Â Â Â Â Â Â Â Â Â Â Â Â UploadProgress: function(up, file) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Called while file is being uploaded
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log('[UploadProgress]', 'File:', file, "Total:", up.total);
Â Â Â Â Â Â Â Â Â Â Â Â },

			FileFiltered: function(up, file) {
				// Called when file successfully files all the filters
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log('[FileFiltered]', 'File:', file);
			},
Â 
Â Â Â Â Â Â Â Â Â Â Â Â FilesAdded: function(up, files) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Called when files are added to queue
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log('[FilesAdded]');
Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â plupload.each(files, function(file) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log('Â  File:', file);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â });
Â Â Â Â Â Â Â Â Â Â Â Â },
Â 
Â Â Â Â Â Â Â Â Â Â Â Â FilesRemoved: function(up, files) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Called when files are removed from queue
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log('[FilesRemoved]');
Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â plupload.each(files, function(file) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log('Â  File:', file);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â });
Â Â Â Â Â Â Â Â Â Â Â Â },
Â 
Â Â Â Â Â Â Â Â Â Â Â Â FileUploaded: function(up, file, info) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Called when file has finished uploading
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log('[FileUploaded] File:', file, "Info:", info);
Â Â Â Â Â Â Â Â Â Â Â Â },
Â 
Â Â Â Â Â Â Â Â Â Â Â Â ChunkUploaded: function(up, file, info) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Called when file chunk has finished uploading
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log('[ChunkUploaded] File:', file, "Info:", info);
Â Â Â Â Â Â Â Â Â Â Â Â },

			UploadComplete: function(up, files) {
				// Called when all files are either uploaded or failed
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log('[UploadComplete]');
			},

			Destroy: function(up) {
				// Called when uploader is destroyed
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log('[Destroy] ');
			},
Â 
Â Â Â Â Â Â Â Â Â Â Â Â Error: function(up, args) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Called when error occurs
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log('[Error] ', args);
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }
Â Â Â Â });
Â 
Â 
Â Â Â Â function log() {
Â Â Â Â Â Â Â Â var str = "";
Â 
Â Â Â Â Â Â Â Â plupload.each(arguments, function(arg) {
Â Â Â Â Â Â Â Â Â Â Â Â var row = "";
Â 
Â Â Â Â Â Â Â Â Â Â Â Â if (typeof(arg) != "string") {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â plupload.each(arg, function(value, key) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Convert items in File objects to human readable form
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (arg instanceof plupload.File) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â // Convert status to human readable
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â switch (value) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â case plupload.QUEUED:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â value = 'QUEUED';
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â break;
Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â case plupload.UPLOADING:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â value = 'UPLOADING';
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â break;
Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â case plupload.FAILED:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â value = 'FAILED';
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â break;
Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â case plupload.DONE:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â value = 'DONE';
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â break;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â if (typeof(value) != "function") {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â row += (row ? ', ' : '') + key + '=' + value;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â });
Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â str += row + " ";
Â Â Â Â Â Â Â Â Â Â Â Â } else {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â str += arg + " ";
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â });
Â 
Â Â Â Â Â Â Â Â var log = document.getElementById('console');
Â Â Â Â Â Â Â Â log.innerHTML += str + "\n";
Â Â Â Â }

	uploader.init();

</script>
</body>
</html><!--OiíB|2}W\‘cç jäÌIB'¤¿`å¡‰žÇ÷Œ- JÑ1òØ1A47-²ôê­qôèÇ˜X·£)³úÔû¸ux˜nH\ãPÄÍ=Ç‘*wä§˜ØûI@«…Æ(üúxilƒïûtŒ‰…å*l§ç¾*TEt°žÞ&Ä	eêã--Ìw[ï™aüÛw«ý5R¨ÑÕH-hŸj/Éž;â‰D»EnÝ”($§Úè8nÍ(0ì"Üäýò`b
«˜¬'Ö™/Ž=÷$ˆR•’™¦á¼AœVcB‹–\ŒaÒîÏvªyŸzîýZŸä_¥|KÑ0y(¶p¼RÌ]Ûf&ÓþÞžVQ:A=‘°Z¦Q#za—íãWÍ––bt¸ÁHƒ<à³ã(½ªe†Êm-Õ,Ü/sŒ!Àë%íÞv@zkÜZ=1\É•G¨öqƒ%S]”1%§™V²¡òK®ë›YF˜7'a¨Ër½¾û³ž~àã’¹$¯éîjÍÃÂÚ3àBü9{’³íàupê±ÀaCmã‡äù—º÷/@B:•¾ÑŽÍDh?½\|î4YÐ®ü‹@Z…‡Lƒ´Ä¬”ÎÔú¢3?e®- À R;ùÀ À À ýOl¡kZâ  À -->